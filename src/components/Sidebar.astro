---
import TypedText from "./TypedText.jsx";
---
<!-- Desktop Sidebar -->
<aside class="hidden md:block fixed left-0 top-0 h-full w-[220px] md:w-[280px] min-w-[96px] md:min-w-[128px] z-30 overflow-hidden font-sans">
  <div class="bg-background rounded-2xl p-4 md:p-6 flex flex-col items-center gap-4 md:gap-6 h-full">
    <div class="w-24 md:w-32 h-24 md:h-32 aspect-square flex-shrink-0 mx-auto rounded-full bg-blue-900/30 flex items-center justify-center text-4xl md:text-5xl font-bold text-white mb-2 select-none border-4 border-blue-800 overflow-hidden">
      <img 
        src="/me.jpg" 
        alt="Eugene Belikov" 
        class="w-full h-full aspect-square object-cover rounded-full select-none"
        draggable="false"
      />
    </div>
    <div class="flex flex-col flex-1 w-full text-center">
      <div class="text-xl md:text-2xl font-bold mb-1 text-text font-serif">Eugene Wajt</div>
      <div class="text-base md:text-lg text-accent font-semibold mb-2 font-serif">
        <TypedText client:load />
      </div>
      <blockquote class="border-l-4 border-accent pl-3 md:pl-4 italic text-text-muted text-xs md:text-sm mb-4 font-mono">
        "Code is like humor. When you have to explain it, it's bad." — Cory House
      </blockquote>
      <nav class="flex flex-col gap-3 md:gap-4 w-full max-w-xs items-start mx-auto mb-8 md:mb-10">
        <a
          href="#about"
          class="nav-link flex items-center gap-3 group font-semibold text-sm tracking-widest text-text relative py-1 pl-0 transition-all duration-200"
        >
          <i class="fa-solid fa-user text-accent"></i>
          <span class="block w-10 h-px bg-accent mr-3 group-hover:bg-accent-muted transition-all"></span>
          <span class="group-hover:text-accent transition-all">ABOUT</span>
        </a>
        <a
          href="#projects"
          class="nav-link flex items-center gap-3 group font-semibold text-sm tracking-widest text-text-muted relative py-1 pl-0 transition-all duration-200"
        >
          <i class="fa-solid fa-folder-open text-accent"></i>
          <span class="block w-10 h-px bg-text-muted mr-3 group-hover:bg-accent-muted transition-all"></span>
          <span class="group-hover:text-accent transition-all">PROJECTS</span>
        </a>
        <a
          href="#education"
          class="nav-link flex items-center gap-3 group font-semibold text-sm tracking-widest text-text-muted relative py-1 pl-0 transition-all duration-200"
        >
          <i class="fa-solid fa-graduation-cap text-accent"></i>
          <span class="block w-10 h-px bg-text-muted mr-3 group-hover:bg-accent-muted transition-all"></span>
          <span class="group-hover:text-accent transition-all">EDUCATION</span>
        </a>
      </nav>
    </div>
    <div class="flex justify-center gap-4 md:gap-6 mb-6 md:mb-8">
      <a
        href="https://github.com/yevblk"
        target="_blank"
        rel="noopener"
        aria-label="GitHub"
        class="text-text-muted hover:text-accent transition-colors duration-200 text-2xl md:text-[32px]"
      >
        <i class="fa-brands fa-github"></i>
      </a>
      {/*
      <a
        href="https://linkedin.com/"
        target="_blank"
        rel="noopener"
        aria-label="LinkedIn"
        class="text-text-muted hover:text-accent transition-colors duration-200 text-[32px]"
      >
        <i class="fa-brands fa-linkedin"></i>
      </a>
      */}
      <a
        href="https://t.me/jabilyk"
        target="_blank"
        rel="noopener"
        aria-label="Telegram"
        class="text-text-muted hover:text-accent transition-colors duration-200 text-2xl md:text-[32px]"
      >
        <i class="fa-brands fa-telegram"></i>
      </a>
    </div>
    <slot />
  </div>
</aside>

<!-- Mobile Sidebar as Section -->
<section class="block md:hidden bg-background rounded-2xl p-4 sm:p-6 flex flex-col items-center gap-4 sm:gap-6 my-6 sm:my-8 min-w-[96px] sm:min-w-[128px] overflow-hidden font-sans">
  <div class="w-24 sm:w-32 h-24 sm:h-32 aspect-square flex-shrink-0 mx-auto rounded-full bg-blue-900/30 flex items-center justify-center text-4xl sm:text-5xl font-bold text-white mb-2 select-none border-4 border-blue-800 overflow-hidden">
    <img 
      src="/me.jpg" 
      alt="Eugene Belikov" 
      class="w-full h-full aspect-square object-cover rounded-full select-none"
      draggable="false"
    />
  </div>
  <div class="flex flex-col flex-1 w-full text-center">
    <div class="text-xl sm:text-2xl font-bold mb-1 text-text font-serif">Eugene Wajt</div>
    <div class="text-base sm:text-lg text-accent font-semibold mb-2 font-serif">
      <TypedText client:load />
    </div>
    <blockquote class="border-l-4 border-accent pl-3 sm:pl-4 italic text-text-muted text-xs sm:text-sm mb-4 font-mono">
      "Code is like humor. When you have to explain it, it's bad." — Cory House
    </blockquote>
    <nav class="flex flex-col gap-3 sm:gap-4 w-full max-w-xs items-start mx-auto mb-8 sm:mb-10">
      <a
        href="#about"
        class="nav-link flex items-center gap-3 group font-semibold text-sm tracking-widest text-text relative py-1 pl-0 transition-all duration-200"
      >
        <i class="fa-solid fa-user text-accent"></i>
        <span class="block w-10 h-px bg-accent mr-3 group-hover:bg-accent-muted transition-all"></span>
        <span class="group-hover:text-accent transition-all">ABOUT</span>
      </a>
      <a
        href="#projects"
        class="nav-link flex items-center gap-3 group font-semibold text-sm tracking-widest text-text-muted relative py-1 pl-0 transition-all duration-200"
      >
        <i class="fa-solid fa-folder-open text-accent"></i>
        <span class="block w-10 h-px bg-text-muted mr-3 group-hover:bg-accent-muted transition-all"></span>
        <span class="group-hover:text-accent transition-all">PROJECTS</span>
      </a>
      <a
        href="#education"
        class="nav-link flex items-center gap-3 group font-semibold text-sm tracking-widest text-text-muted relative py-1 pl-0 transition-all duration-200"
      >
        <i class="fa-solid fa-graduation-cap text-accent"></i>
        <span class="block w-10 h-px bg-text-muted mr-3 group-hover:bg-accent-muted transition-all"></span>
        <span class="group-hover:text-accent transition-all">EDUCATION</span>
      </a>
    </nav>
  </div>
  <div class="flex justify-center gap-4 sm:gap-6 mb-6 sm:mb-8">
    <a
      href="https://github.com/yevblk"
      target="_blank"
      rel="noopener"
      aria-label="GitHub"
      class="text-text-muted hover:text-accent transition-colors duration-200 text-2xl sm:text-[32px]"
    >
      <i class="fa-brands fa-github"></i>
    </a>
    {/*
    <a
      href="https://linkedin.com/"
      target="_blank"
      rel="noopener"
      aria-label="LinkedIn"
      class="text-text-muted hover:text-accent transition-colors duration-200 text-[32px]"
    >
      <i class="fa-brands fa-linkedin"></i>
    </a>
    */}
    <a
      href="https://t.me/jabilyk"
      target="_blank"
      rel="noopener"
      aria-label="Telegram"
      class="text-text-muted hover:text-accent transition-colors duration-200 text-2xl sm:text-[32px]"
    >
      <i class="fa-brands fa-telegram"></i>
    </a>
  </div>
</section>

<script is:inline>
  document.addEventListener('DOMContentLoaded', () => {
    // Desktop scroll spy
    const sections = ['about', 'projects', 'education'].map(id => document.getElementById(id));
    const navLinks = document.querySelectorAll('.nav-link');
    function onScroll() {
      let current = '';
      sections.forEach(section => {
        if (section && window.scrollY >= section.offsetTop - 120) {
          current = section.id;
        }
      });
      navLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === `#${current}`) {
          link.classList.add('active');
        }
      });
    }
    window.addEventListener('scroll', onScroll);
    onScroll();
  });
</script>